{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://dampen.dev/schemas/widgets/date_picker.schema.json",
  "title": "DatePicker Widget Schema",
  "description": "Schema for the date_picker widget in Dampen XML",
  "type": "object",
  "properties": {
    "value": {
      "description": "Current date value - either a static ISO 8601 string or a binding expression",
      "oneOf": [
        {
          "type": "string",
          "pattern": "^\\d{4}-\\d{2}-\\d{2}$",
          "examples": ["2026-01-25"]
        },
        {
          "type": "string",
          "pattern": "^\\{.+\\}$",
          "description": "Binding expression",
          "examples": ["{model.selected_date}"]
        }
      ]
    },
    "format": {
      "type": "string",
      "description": "strftime format for parsing static date values",
      "default": "%Y-%m-%d",
      "examples": ["%Y-%m-%d", "%d/%m/%Y", "%m/%d/%Y"]
    },
    "show": {
      "type": "string",
      "pattern": "^\\{.+\\}$",
      "description": "Binding expression that resolves to boolean controlling overlay visibility",
      "examples": ["{show_date_picker}"]
    },
    "min_date": {
      "type": "string",
      "description": "Minimum selectable date (ISO 8601 format)",
      "pattern": "^\\d{4}-\\d{2}-\\d{2}$",
      "examples": ["2026-01-01"]
    },
    "max_date": {
      "type": "string",
      "description": "Maximum selectable date (ISO 8601 format)",
      "pattern": "^\\d{4}-\\d{2}-\\d{2}$",
      "examples": ["2026-12-31"]
    },
    "on_submit": {
      "type": "string",
      "description": "Handler name called when date is selected. Receives ISO 8601 date string as parameter.",
      "pattern": "^[a-z_][a-z0-9_]*$",
      "examples": ["handle_date_selected", "on_date_change"]
    },
    "on_cancel": {
      "type": "string",
      "description": "Handler name called when picker is cancelled. No parameter.",
      "pattern": "^[a-z_][a-z0-9_]*$",
      "examples": ["close_picker", "on_cancel"]
    }
  },
  "required": [],
  "additionalProperties": true,
  "examples": [
    {
      "value": "{selected_date}",
      "show": "{show_picker}",
      "on_submit": "date_selected",
      "on_cancel": "picker_cancelled"
    },
    {
      "value": "2026-01-25",
      "min_date": "2026-01-01",
      "max_date": "2026-12-31",
      "on_submit": "handle_date"
    },
    {
      "value": "25/01/2026",
      "format": "%d/%m/%Y",
      "on_submit": "handle_european_date"
    }
  ],
  "childElements": {
    "description": "DatePicker requires exactly one child element (the underlay/trigger widget)",
    "minItems": 1,
    "maxItems": 1,
    "items": {
      "description": "Any valid Dampen widget, typically a button"
    }
  }
}
