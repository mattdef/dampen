{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://dampen.dev/schemas/widgets/time_picker.schema.json",
  "title": "TimePicker Widget Schema",
  "description": "Schema for the time_picker widget in Dampen XML",
  "type": "object",
  "properties": {
    "value": {
      "description": "Current time value - either a static time string or a binding expression",
      "oneOf": [
        {
          "type": "string",
          "pattern": "^\\d{2}:\\d{2}(:\\d{2})?$",
          "examples": ["14:30:00", "14:30"]
        },
        {
          "type": "string",
          "pattern": "^\\{.+\\}$",
          "description": "Binding expression",
          "examples": ["{model.selected_time}"]
        }
      ]
    },
    "format": {
      "type": "string",
      "description": "strftime format for parsing static time values",
      "default": "%H:%M:%S",
      "examples": ["%H:%M:%S", "%H:%M", "%I:%M %p"]
    },
    "show": {
      "type": "string",
      "pattern": "^\\{.+\\}$",
      "description": "Binding expression that resolves to boolean controlling overlay visibility",
      "examples": ["{show_time_picker}"]
    },
    "use_24h": {
      "type": "string",
      "description": "Use 24-hour time format instead of 12-hour AM/PM",
      "enum": ["true", "false", "1", "0", "yes", "no"],
      "default": "false"
    },
    "show_seconds": {
      "type": "string",
      "description": "Show seconds selector in the time picker",
      "enum": ["true", "false", "1", "0", "yes", "no"],
      "default": "false"
    },
    "on_submit": {
      "type": "string",
      "description": "Handler name called when time is selected. Receives HH:MM:SS time string as parameter.",
      "pattern": "^[a-z_][a-z0-9_]*$",
      "examples": ["handle_time_selected", "on_time_change"]
    },
    "on_cancel": {
      "type": "string",
      "description": "Handler name called when picker is cancelled. No parameter.",
      "pattern": "^[a-z_][a-z0-9_]*$",
      "examples": ["close_picker", "on_cancel"]
    }
  },
  "required": [],
  "additionalProperties": true,
  "examples": [
    {
      "value": "{selected_time}",
      "show": "{show_picker}",
      "use_24h": "true",
      "on_submit": "time_selected"
    },
    {
      "value": "14:30:00",
      "use_24h": "true",
      "show_seconds": "true",
      "on_submit": "handle_time"
    },
    {
      "value": "2:30 PM",
      "format": "%I:%M %p",
      "on_submit": "handle_12h_time"
    }
  ],
  "childElements": {
    "description": "TimePicker requires exactly one child element (the underlay/trigger widget)",
    "minItems": 1,
    "maxItems": 1,
    "items": {
      "description": "Any valid Dampen widget, typically a button"
    }
  }
}
