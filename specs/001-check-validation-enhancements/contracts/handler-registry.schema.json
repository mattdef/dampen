{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Handler Registry",
  "description": "JSON schema for handler registry used by gravity check command",
  "type": "array",
  "items": {
    "$ref": "#/definitions/HandlerDefinition"
  },
  "definitions": {
    "HandlerDefinition": {
      "type": "object",
      "required": ["name"],
      "properties": {
        "name": {
          "type": "string",
          "description": "Handler function name as referenced in XML on_* attributes"
        },
        "param_type": {
          "type": ["string", "null"],
          "description": "Expected message type parameter, null for no parameters"
        },
        "returns_command": {
          "type": "boolean",
          "description": "Whether the handler returns a Command for async operations",
          "default": false
        }
      }
    }
  }
}
